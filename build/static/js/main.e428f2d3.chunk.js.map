{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseURL","personService","add","person","axios","post","then","response","data","remove","id","delete","getAll","get","update","put","Filter","filter","handleNewFilter","value","onChange","PersonForm","addPerson","newName","handleNewName","newNumber","handleNewNumber","onSubmit","type","Numbers","persons","removePerson","p","RegExp","test","name","map","number","onClick","Notification","notification","message","warning","notificationStyle","color","backgroundColor","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","setNewName","setNewNumber","setFilter","setPersons","setNotification","useEffect","console","log","event","target","preventDefault","length","alert","newPerson","duplicate","find","window","confirm","modifiedPerson","concat","personToRemove","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e428f2d3.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseURL = 'https://arden-servu.herokuapp.com/api/persons'\r\n\r\nconst add = (person) => {\r\n    const request = axios.post(baseURL, person)\r\n    return request\r\n        .then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseURL}/${id}`)\r\n    return request\r\n        .then(response => response.data)\r\n}\r\n\r\nconst update = (id, person) => {\r\n    const request = axios.put(`${baseURL}/${id}`, person)\r\n    return request\r\n        .then(response => response.data)\r\n}\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseURL)\r\n    return request\r\n        .then(response => response.data)\r\n}\r\n\r\nconst personService = { add, remove, getAll, update }\r\n\r\nexport default personService","import React, { useEffect, useState } from 'react'\r\nimport personService from './services/persons'\r\n\r\n\r\nconst App = () => {\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n\r\n  const [ persons, setPersons] = useState([])\r\n  const [ notification, setNotification ] = useState(null)\r\n\r\n\r\n  const hook = () => {\r\n      personService\r\n      .getAll()\r\n      .then(persons => {\r\n        console.log('Persons received:', persons)\r\n        setPersons(persons)\r\n      })\r\n  }\r\n  useEffect(hook, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    //console.log(event)\r\n\r\n    if (newName.length <= 0) {\r\n      alert('\"Name\" field is required!')\r\n      return;\r\n    }\r\n\r\n    if (newNumber.length <= 0) {\r\n      alert('\"Number\" field is required!')\r\n      return;\r\n    }\r\n\r\n    if (!/^[0-9+-]*$/.test(newNumber)) {\r\n      alert('Invalid phone number!')\r\n      return;\r\n    }\r\n\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    const duplicate = persons.find(person =>\r\n      person.name === newPerson.name\r\n    )\r\n    \r\n    if (duplicate) {\r\n      if (window.confirm(`${newPerson.name} already exists, replace the old number with a new one?`))\r\n      {\r\n        personService\r\n        .update(duplicate.id, {...duplicate, number: newPerson.number}) //could be just newPerson i guess\r\n        .then(modifiedPerson => {\r\n          console.log('Modified person', modifiedPerson);\r\n          \r\n          setPersons(\r\n            persons.map(person =>\r\n              (person.id === duplicate.id)\r\n              ? modifiedPerson\r\n              : person\r\n            )\r\n          )\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setNotification(`Number for \"${modifiedPerson.name}\" updated!`)\r\n        })\r\n      }\r\n    }\r\n    else {\r\n      personService\r\n      .add(newPerson)\r\n      .then(person => {\r\n        \r\n        console.log('Person added:', person)\r\n        setPersons(\r\n          persons.concat(person)\r\n        )\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setNotification({\r\n          message: `${person.name} added!`\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  const handleNewFilter = (event) => {\r\n    const filter = event.target.value\r\n    setFilter(filter)\r\n  }\r\n\r\n  const handleNewName = (event) => {\r\n    const name = event.target.value\r\n    setNewName(name)\r\n  }\r\n  const handleNewNumber = (event) => {\r\n    const number = event.target.value\r\n    setNewNumber(number)\r\n  }\r\n\r\n  const removePerson = (personToRemove) => {\r\n    personService.remove(personToRemove.id)\r\n      .then(() => {\r\n        console.log(personToRemove)\r\n        setPersons(persons.filter(person => person.id !== personToRemove.id))\r\n        setNotification({\r\n          message: `${personToRemove.name} removed!`\r\n        })\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        \r\n        setNotification({\r\n          message: `${personToRemove.name} has already been removed from the server! :( `,\r\n          warning: true\r\n        })\r\n      })\r\n  }\r\n\r\n\r\n  return (\r\n\r\n    <div>\r\n\r\n      <Notification notification={notification} />\r\n      <h2>Phonebook</h2>\r\n\r\n      <Filter\r\n        filter={filter}\r\n        handleNewFilter={handleNewFilter}\r\n      />\r\n\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNewName={handleNewName}\r\n        handleNewNumber={handleNewNumber}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n      <Numbers\r\n        persons={persons}\r\n        filter={filter}\r\n        removePerson={removePerson}\r\n      />\r\n      {/*<div>newName: {newName}</div>*/}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n\r\nconst Filter = ({filter, handleNewFilter}) => (\r\n  <div>\r\n    filter shown with <input\r\n      value={filter}\r\n      onChange={handleNewFilter}\r\n    />\r\n  </div>\r\n)\r\n\r\n/* Omaan päähän ois tuntunut paljon fiksummalta siirtää name ja number -hookit tän sisään, mutta tien nyt ohjeen mukaan*/\r\nconst PersonForm = ({addPerson, newName, handleNewName, newNumber, handleNewNumber}) => (\r\n  \r\n  <form onSubmit={addPerson}>\r\n    <div>name: <input\r\n          value={newName}\r\n          onChange={handleNewName}\r\n        />\r\n    </div>\r\n    <div>\r\n        number: <input\r\n          value={newNumber}\r\n          onChange={handleNewNumber}\r\n        />\r\n    </div>\r\n    <div>\r\n        <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nconst Numbers = ({persons, filter, removePerson}) => {\r\n\r\n  return (\r\n    <div>\r\n      <ul>\r\n        {persons\r\n          .filter(p => {\r\n            const regexp = new RegExp('^'+filter, 'i')\r\n            return (regexp.test(p.name))\r\n          })\r\n          .map(\r\n            p => (\r\n              <li key={p.id}>\r\n                {p.name} {p.number} <br />\r\n                <button onClick={() => removePerson(p)}>Delete</button>\r\n              </li>\r\n            )\r\n          )\r\n        }\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Notification = ({notification}) => {\r\n  if (!notification)\r\n    return null\r\n\r\n    const {message, warning} = notification\r\n\r\n  const color = (warning) ? 'red' : 'green'\r\n  const backgroundColor = (warning) ? 'rgb(255,200,200)' : 'lightgreen'\r\n\r\n  const notificationStyle = {\r\n    color,\r\n    backgroundColor,\r\n    fontSize: '20px',\r\n    borderStyle: 'solid',\r\n    borderRadius: '5px',\r\n    padding: '10px',\r\n    marginBottom: '10px'\r\n  }\r\n\r\n  return (\r\n    <div style={notificationStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}